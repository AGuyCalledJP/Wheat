#Backend
<FunctionPlotter>:
    id: functionplotter
    function: func_plot
    keyboard: key

    FloatLayout:
        id: header
        pos_hint: {'x' : 0, 'y' : .9}
        size_hint: 1, 0.1
        canvas.before:
            Color:
                rgba: 0,0,0, 1.
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            id: move
            pos_hint: {'x': .7,'y': 0}
            size_hint: .3,1
            text: 'Move'
            on_press: functionplotter.flip()
        CheckBox:
            id: check
            pos_hint: {'x': 0,'y': 0}
            size_hint: .3,1
            canvas.before:
                Color:
                    rgba: 0,0,0, 1.
                Rectangle:
                    pos: self.pos
                    size: self.size

    FloatLayout:
        id: total
        pos_hint: {'x' : 0, 'y': 0}
        size_hint: 1, 0.9

        BoxLayout:
            orientation: 'horizontal'
            pos_hint: {'x' : 0, 'y': 0}
            size_hint: 1,1

            Function:
                pos_hint: {'x': 0,'y': 0}
                size_hint: 1,1
                id: func_plot
                canvas.before:
                    Rectangle:
                        pos: self.pos
                        size: self.size

                BoxLayout:
                    orientation: 'vertical'
                    pos_hint: {'x': 0,'y': 0}
                    size_hint: 1,1

                    id: destination

                Equation:
                    id: equation
                    pos_hint: {'x': 0.1, 'y': 0.02}
                    size_hint: 0.8,0.08
                    multiline: False
                    text: root.equation_text


            Keyboard:
                canvas.before:
                    Color:
                        rgba: 0,0,0,1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                id: key
                spacing: 1
                cols: 5
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 - 0.05
                    font_size: root.fontSizer
                    text: u'\u221a'
                    on_press: functionplotter.ClickedSqrt()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: 'sin'
                    on_press: functionplotter.ClickedSin()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: 'cos'
                    on_press: functionplotter.ClickedCos()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: 'tan'
                    on_press: functionplotter.ClickedTan()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: u'\u03c0'
                    on_press: functionplotter.ClickedPi()

                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '^'
                    on_press: functionplotter.ClickedExp()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '1/x'
                    on_press: functionplotter.ClickedInv()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '('
                    on_press: functionplotter.ClickedLeftP()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: ')'
                    on_press: functionplotter.ClickedRightP()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: u'\u00f7'
                    on_press: functionplotter.ClickedDiv()

                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: 'x' + u'\u00b2'
                    on_press: functionplotter.ClickedSquared()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '7'
                    on_press: functionplotter.Clicked7()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '8'
                    on_press: functionplotter.Clicked8()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '9'
                    on_press: functionplotter.Clicked9()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 - 0.05
                    font_size: root.fontSizer
                    text: u'\u2022'
                    on_press: functionplotter.ClickedTimes()

                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: 'x'
                    on_press: functionplotter.Clickedx()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '4'
                    on_press: functionplotter.Clicked4()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '5'
                    on_press: functionplotter.Clicked5()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '6'
                    on_press: functionplotter.Clicked6()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: u'\u2212'
                    on_press: functionplotter.ClickedMinus()

                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '<-'
                    on_press: functionplotter.ClickedDel()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '1'
                    on_press: functionplotter.Clicked1()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '2'
                    on_press: functionplotter.Clicked2()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '3'
                    on_press: functionplotter.Clicked3()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: u'\u002b'
                    on_press: functionplotter.ClickedPlus()

                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: 'Clear'
                    on_press: functionplotter.ClickedClear()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '0'
                    on_press: functionplotter.Clicked0()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '.'
                    on_press: functionplotter.ClickedPoint()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4 -0.05
                    font_size: root.fontSizer
                    text: '(-)'
                    on_press: functionplotter.ClickedNeg()
                Button:
                    background_normal: ''
                    background_color: root.c1, root.c2, root.c3, root.c4
                    font_size: root.fontSizer
                    text: '='
                    on_press: functionplotter.ClickedEnter()
